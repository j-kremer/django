<!DOCTYPE html>{% load static %}
<html>
    <head>
        {% load l10n %}
        <style>
            div#map {
                height: 100%;
                width: 100%;
                margin: 0;
                position: relative;
            }
            body, html {
                width: 100%;
                height: 100%;
                margin: 0;
            }
            div#menu {
                position: absolute;
                z-index: 999;
                top: 0;
                left: 0;
                width: 250px;
                background-color: white;
                height: 100%;
                margin: 0;
            }
        </style>
    </head>
    <body>
        <div id="map"></div>
        <script>
        function initMap() {
            var latlng = new google.maps.LatLng({{ lat|unlocalize }}, {{ long|unlocalize }});
            var mylatlng = {lat: {{ lat|unlocalize }}, lng: {{ long|unlocalize }}};
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 12,
                center: latlng
            });
            {% for vehicle in vehicles_online %}
            new google.maps.Marker({
                position: {lat: {{ vehicle.Lat|unlocalize }}, lng: {{ vehicle.Lon|unlocalize }} },
                map: map,
                icon: '{% static "tram-icon.png" %}'
            });
            {% endfor %}
        }
        </script>
        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&callback=initMap">
        </script>


    <div id="menu">
        <form action="/" method="post">
            {% csrf_token %}
            <select name="line">
                <option>---</option>
                {% for tram in trams_lines %}
                    <option value="{{ tram }}"{% if tram == request.POST.line %} selected{% endif %}>{{ tram }}</option>
                {% endfor %}
            </select><br />
            <input type="submit" name="submit" value="Wyslij" />

        </form>
    </div>
    </body>
</html>